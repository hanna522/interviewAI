:root {
  --bg: #0a0f1e;
  --panel: #101733;
  --line: #1c2752;
  --fg: #e7ecff;
  --muted: #a7b2d9;
  --primary: #7aa2ff;
  --primary-ink: #0b122b;
  --danger: #ff8999;
  --green: #50e3a4;
  --amber: #ffcd6b;
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto;
  background: radial-gradient(1200px 700px at 80% -10%, #122156, transparent 60%), var(--bg);
  color: var(--fg);
}

.app-shell { display: grid; grid-template-rows: auto 1fr auto; min-height: 100vh; }

/* Topbar */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; border-bottom: 1px solid var(--line); backdrop-filter: blur(6px);
}
.brand { display: flex; align-items: center; gap: 10px; }
.brand h1 { font-size: 18px; margin: 0; }
.dot { width: 10px; height: 10px; border-radius: 50%; background: var(--primary); box-shadow: 0 0 18px var(--primary); }
.actions { display: flex; align-items: center; gap: 10px; }

/* Buttons & chips */
.btn {
  padding: 10px 14px; border: 0; border-radius: 12px; font-weight: 700; cursor: pointer;
}
.btn.primary { background: var(--primary); color: var(--primary-ink); }
.btn.danger { background: var(--danger); color: #2a0d12; }
.btn[disabled], .btn[aria-busy="true"] { opacity: .6; cursor: default; }

.chip { padding: 6px 10px; border-radius: 999px; font-size: 12px; border: 1px solid transparent; }
.chip.gray { color: var(--muted); border-color: var(--line); }
.chip.green { color: #003320; background: #82f2c2; }
.chip.amber { color: #3a2a00; background: #ffe29d; }

/* Layout */
.grid {
  display: grid; gap: 16px;
  grid-template-columns: 340px 1fr 380px;
  padding: 16px; align-items: start;
}
.card {
  background: var(--panel); border: 1px solid var(--line); border-radius: 16px; padding: 14px;
}
.section-title { margin: 6px 0 12px; font-size: 14px; color: var(--muted); letter-spacing: .2px; }
.label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.textarea {
  width: 100%; resize: vertical; min-height: 140px;
  background: #0c1433; color: var(--fg); border: 1px solid #243466; border-radius: 12px; padding: 10px;
}
.tips { margin: 10px 0 0; padding-left: 18px; color: var(--muted); font-size: 12px; }
.hint { margin-top: 14px; color: var(--muted); font-size: 12px; }
.alert {
  margin-top: 10px; color: #ffb3bd; background: #2d1020; border: 1px solid #4a1c2f;
  padding: 10px; border-radius: 12px; font-size: 13px;
}

/* Center stage (avatar) */
.center-stage {
  display: grid; place-items: center; gap: 12px; min-height: 420px;
  background: linear-gradient(180deg, rgba(124,165,255,0.06), transparent 60%);
  border-radius: 16px; border: 1px dashed #2a3c70;
}
.avatar {
  position: relative; width: 180px; height: 180px; border-radius: 999px;
  background: radial-gradient(110px 110px at 60% 38%, #5aa2ff, #1c2752);
  box-shadow: 0 0 140px rgba(110,168,254,.2);
  overflow: hidden;
}
.ring { position: absolute; inset: -10px; border-radius: 999px; border: 2px solid rgba(110,168,254,.25); }
.r1 { animation: pulse 2.8s infinite; }
.r2 { animation: pulse 2.8s .7s infinite; }
.r3 { animation: pulse 2.8s 1.4s infinite; }
.avatar.live .r1, .avatar.live .r2, .avatar.live .r3 { border-color: rgba(110,168,254,.55); }
@keyframes pulse { 0% { transform: scale(1); opacity: .6 } 70% { transform: scale(1.15); opacity: .14 } 100% { transform: scale(1.22); opacity: 0 } }

.loader {
  position: absolute; inset: 0; display: grid; place-items: center;
  background: rgba(5,10,25,.35); backdrop-filter: blur(2px);
}
.loader::after {
  content: ""; width: 26px; height: 26px; border-radius: 50%;
  border: 3px solid rgba(255,255,255,.25); border-top-color: white; animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.nowplaying { font-size: 13px; color: var(--fg); }
.nowplaying.muted { color: var(--muted); }
.blink { color: var(--green); animation: blink 1.2s steps(2, start) infinite; }
@keyframes blink { to { visibility: hidden; } }

/* Transcript */
.transcript-card { max-height: 70vh; overflow: auto; }
.empty { color: var(--muted); margin: 10px 0; }
.list { list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; }
.turn .bubble {
  background: #0c1433; border: 1px solid #243466; border-radius: 14px; padding: 10px 12px;
}
.turn.assistant .bubble { background: #0e1b3f; border-color: #2a3c70; }
.role { display: inline-block; font-size: 11px; color: var(--muted); margin-bottom: 4px; }

/* Footer */
.footer { border-top: 1px solid var(--line); padding: 10px 16px; text-align: center; color: var(--muted); }

/* Responsive */
@media (max-width: 1024px) {
  .grid { grid-template-columns: 1fr; }
  .center-stage { min-height: 300px; }
}

.live-caption {
  margin-top: 12px;
  font-size: 15px;
  max-width: 80%;
  text-align: center;
  padding: 6px 10px;
  background: rgba(0,0,0,.4);
  border-radius: 8px;
  color: #fff;
}
.live-caption .blink {
  animation: blink 1s steps(2, start) infinite;
}

